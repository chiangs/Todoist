angular.module('todo').component('todoList', {
	templateUrl : 'app/todo/todoList/todoList.component.html',
	controller : function(todoService) {
		var vm = this;
		vm.todos = [];
		
		vm.todos = todoService.index();
		
		vm.getNumIncomplete = function() {
			var counter = 0;
			for (var i = 0; i < vm.todos.length; i++) {
				if (vm.todos[i].completed == false) {
					counter++
				}
			}
			return counter;
		}
		
		vm.addToList = function(object) {
			var generateId = function() {
				  return vm.todos[vm.todos.length-1].id + 1;
				}
			var defCompleted = false;
			object.id = generateId();
			object.completed = defCompleted;
			vm.todos.push(angular.copy(object));
			console.log(object);
		}
		
		vm.showTable = true;
		vm.selected = null;
		
		vm.displayTodo = function(todo) {
			vm.showTable = false;
			vm.selected = todo;
		}
		
		vm.displayTable = function() {
			vm.showTable = true;
			vm.selected = null;
		}
		
		vm.updateTodo = function(todo) {
			vm.todos.forEach (function(item) {
				if (item.id == todo.id) {
					item.task = todo.task;
					item.description = todo.description;
					item.completed = todo.completed;
				}
			})
		}
	
	},
		controllerAs : 'vm'
})